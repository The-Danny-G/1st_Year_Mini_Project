---
title: "Initial R Code"
author: "Daniel Gardner"
date: "2024-02-26"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Setup

```{r warning=FALSE}
# Using BoolNet to load SBML data of Prostate Cancer
library(BoolNet)
Model<-loadSBML("Montagud2022_Prostate_Cancer.sbml")


# Creating list of genes and then data frame of their values (Initial values random)
Genes<-Model$genes
num.genes<-length(Genes)
Data<-data.frame(Genes=Genes,Values=sample(c(0,1),num.genes,replace = T),Rules=rep("none",num.genes))

# Creating separate boolean variables for every single gene
# Also adding in each Gene's boolean rule as a character string
for (i in 1:num.genes){
  assign(Genes[i],TRUE)
  Data$Rules[i]<-Model$interactions[[i]][3][[1]]
}

#eval(parse(text=test))
```

# Initial test with a few steps

```{r}
Time_Series<-Data
for (k in 1:10000){
  # Picking random gene
  Gene<-sample(Genes,1)
  # Finding said gene's rule, current value, and whether it is being activated
  Rule<-Data[Data$Genes==Gene,3]
  Gen.act<-eval(parse(text=Rule))
  cur.val<-Data$Values[Data$Genes==Gene]
  
  # If activated and off, turn on
  if (Gen.act & cur.val==0){
    Time_Series$Values[Time_Series$Genes==Gene]<-1
    assign(Gene,TRUE)
  }
  # If repressed and on, turn off
  else if(!Gen.act & cur.val==1){
    Time_Series$Values[Time_Series$Genes==Gene]<-0
    assign(Gene,FALSE)
  }
  # Else, do nothing
}

Time_Series$Values

Data$Values
```


